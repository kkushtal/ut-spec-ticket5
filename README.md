Условие:
В организации привыкли в течение открытого периода работать с видом цен "Нижний порог рентабельности". Данный вид цены определяется как цены закупки с наценкой в 3%. По желанию руководства необходимо расширить функциональность документа "Заказ клиента". Менеджеры по продажам должны видеть дополнительную колонку - "Нижний порог рентабельности". Части из этих менеджеров запрещено продавать товар нище установленной цены (указывается через полномочию пользователей). Значение нижнего порога рентабельности должно сохраняться в документе и проставляться как при построчном заполнении табличной части, так и при использовании подбора, и должно меняться при изменении реквизитов табличной части, учавствующих в ценообразовании. Необходимо реализовать требовния заказчика, доработки должны быть выполнены в расширении конфигурации.

Решение:
- Создал расширение, добавил документ "Заказ клиента" и все реквизиты объекта.
- В режиме Предприятия добавил константу ВидМинимальноДопустимыхЦенПродажи со значением вида цена НижнийПорогРентабельности.
- В расширении: добавил роль ЗапретПродажиНижеЦеныРентабельности и в ТЧ Товары добавил числовой реквизит НижнийПорогРентабельности и вынес его на форму в ТЧ, сразу за Ценой.
- Весь код писал только в модуле формы.
- Добавил функции РассчитатьНижнийПорогРентабельности (для одной строки и для массиива строк), которая вызывает типовую ЦеныПредприятияЗаполнениеСервер.ЗаполнитьЦены (взял при отладке подбора товаров, в моменте заполнения всех цен в табличной части, для массива подобранных товаров)
- При изменении Даты, Валюты и при Подборе товаров, добавил вызов РассчитатьНижнийПорогРентабельности с массивом строк, у которых НЕ ЗначениеЗаполнено(Строка.НижнийПорогРентабельности).
- При изменении Номенклатуры, Упаковки, Серии и ВидаЦены добавил вызов РассчитатьНижнийПорогРентабельности с Текущей строкой.
- В &После экз_ОбработкаПроверкиЗаполненияНаСервереПосле добавил Если РольДоступна и все Цена >= НижнийПорогРентабельности, то продолжить. Иначе, Отказ=Истина и выдать сообщение об ошибке о каждой строке.
- В режиме предприятия, от Администратор добавил группу доступа, создал профиль Младшего менеджера, скопировав профиль менеджера по продажам и добавив ему группу доступа с ЗапретПродажиНижеЦеныРентабельности.
- Проверил на Младшем менеджере, работает ли логика. Все отработало.
- Все проверял на тонком клиенте.
____________
Код сравнения Цены и НижнегоПорогаРентабельности поместил в ОбработкаПроверкиЗаполненияНаСервереПосле, т.к.
- можно проверить на этапе формы (до записи данных в БД), иначе пришлось бы делать запрос в ОбработкеПроведения после записи в БД и отменять транзакцию, а это лишнее.
- не вызывается при Удалении проведения, 
- не вызывается при сохранении (записи) документа
- и т.к. семантически проверка ближе всего к ПроверкеЗаполнения, но проверка не только на заполненность, а на соответствие условию Цена > НижнийПорогРентабельности
- !но не вызывается при программной записи, об этом в ТЗ не было сказано.

Прочее:
- Модуль формы  ОбработкаПроверкиЗаполненияНаСервере и Модуль объекта  ОбработкаПроверкиЗаполнения 
Вызываются только при интерактивной записи! При программной записи  не вызываются.  Для проверки нужно использовать метод объекта ПроверитьЗаполнение(), который инициирует запуск этих событий.
- https://its.1c.ru/db/pubdevguide83#content:617:hdoc
- https://its.1c.ru/db/pubdevguide83#content:618:hdoc
- https://its.1c.ru/db/pubdevguide83#content:619:hdoc
- https://infostart.ru/1c/articles/1098803/
- https://github.com/kuzyara/Sequences-of-events-for-1C-objects
